---
date: 2025-12-06
---


场景：
- 逐条推荐内容
- 推荐过程中支持随时中断
- 能够从上次中断的位置继续推荐
- mcp 执行等待用户确认
async generator
- 每次 gen.next() 都是返回一个 Promise，即你可以在一步逻辑中边等待边产出值。因此适合做“流式数据处理”。例如 AI 推理输出、视频弹幕等
- 功能
	- AI 流持续输出内容 -- 使用 await + yield 实现异步生成器
	- 过程中可随时中断 -- 使用 AbortController，在异步生成器中检查 signal.aborted 值
	- 可以从中断的地方继续执行 -- 记录断点位置，继续时传入 currentIndex 作为起始位置
